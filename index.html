<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="assets/style/style.css">

</head>

<body>


    <img src="assets/imgs/logo.webp" class="logo" alt="">

    <ul id="menu">
        <li>
            <a href="" id="start_game">Start Game</a>
        </li>
        <li>
            <a href="">Music</a>
        </li>
    </ul>

    <div id="groups">
        <div id="group_a" class="group">
            <h2>Group A</h2>

            <ul>
                <li>
                    <img src="assets/imgs/flags/group A/qa.png" alt="">
                    <b class="team">Qatar</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group A/ec.png" alt="">
                    <b class="team">Ecuador</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group A/nl.png" alt="">
                    <b class="team">Netherlands</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group A/sn.png" alt="">
                    <b class="team">Senegal</b>
                </li>
            </ul>
        </div>
        <div id="group_b" class="group">
            <h2>Group B</h2>

            <ul>
                <li>
                    <img src="assets/imgs/flags/group B/en.png" alt="">
                    <b class="team">England</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group B/ir.png" alt="">
                    <b class="team">Iran</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group B/us.png" alt="">
                    <b class="team">United States</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group B/wl.png" alt="">
                    <b class="team">Wales</b>
                </li>
            </ul>
        </div>
        <div id="group_c" class="group">
            <h2>Group C</h2>

            <ul>
                <li>
                    <img src="assets/imgs/flags/group C/ag.webp" alt="">
                    <b class="team">Argentina</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group C/mx.png" alt="">
                    <b class="team">Mexico</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group C/pl.webp" alt="">
                    <b class="team">Poland</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group C/sa.png" alt="">
                    <b class="team">Saudi Arabia</b>
                </li>
            </ul>
        </div>
        <div id="group_d" class="group">
            <h2>Group D</h2>

            <ul>
                <li>
                    <img src="assets/imgs/flags/group D/au.png" alt="">
                    <b class="team">Australia</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group D/dk.png" alt="">
                    <b class="team">Denmark</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group D/fr.png" alt="">
                    <b class="team">France</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group D/tn.webp" alt="">
                    <b class="team">Tunisia</b>
                </li>
            </ul>
        </div>
        <div id="group_e" class="group">
            <h2>Group E</h2>
            <ul>
                <li>
                    <img src="assets/imgs/flags/group E/cr.png" alt="">
                    <b class="team">Costa-Rica</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group E/de.png" alt="">
                    <b class="team">Germany</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group E/jp.png" alt="">
                    <b class="team">Japan</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group E/sp.png" alt="">
                    <b class="team">Spain</b>
                </li>
            </ul>
        </div>
        <div id="group_f" class="group">
            <h2>Group F</h2>
            <ul>
                <li>
                    <img src="assets/imgs/flags/group F/be.png" alt="">
                    <b class="team">Belgium</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group F/ca.png" alt="">
                    <b class="team">Canada</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group F/cr.png" alt="">
                    <b class="team">Croatia</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group F/ma.png" alt="">
                    <b class="team">Morocco</b>
                </li>
            </ul>
        </div>
        <div id="group_g" class="group">
            <h2>Group G</h2>

            <ul>
                <li>
                    <img src="assets/imgs/flags/group G/br.png" alt="">
                    <b class="team">Brazil</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group G/ch.png" alt="">
                    <b class="team">Switzerland</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group G/cm.png" alt="">
                    <b class="team">Cameroon</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group G/cr.png" alt="">
                    <b class="team">Serbia</b>
                </li>
            </ul>
        </div>
        <div id="group_h" class="group">
            <h2>Group H</h2>
            <ul>
                <li>
                    <img src="assets/imgs/flags/group H/gh-removebg-preview.png" alt="">
                    <b class="team">Ghana</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group H/kr.png" alt="">
                    <b class="team">South Korea</b>
                </li>
                <li>
                    <img src=" assets/imgs/flags/group H/pt.png" alt="">
                    <b class="team">Portugal</b>
                </li>
                <li>
                    <img src="assets/imgs/flags/group H/uy.png" style="width:50px; margin-left:-10px" alt="">
                    <b class="team">Uruguay</b>
                </li>
            </ul>
        </div>
    </div>

    <div id="fixtures">
        <h4 style="color:white; font-size:2rem">GROUP STAGE</h4>
        <h1>Your Team: <b id="your_team">England</b></h1>
        <h2>Fixture</h2>
        <ul>
        </ul>

        <h1><a href="game.html">PLAY</a></h1>

    </div>

</body>

<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
<script></script>
<script type="importmap">
    {
        "imports": {
        "three": "https://unpkg.com/three@0.121.1/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.121.1/examples/jsm/"
        }
    }
</script>

<script type="module">

    // Teams and groups
    var picked_team;
    var groups = {
        "group_a": {
            'Qatar': {
                'country_name': "Qatar",
                'country_code': "QA",
                'points': 0,
            },
            'Ecuador': {
                'country_name': "Ecuador",
                'country_code': "EC",
                'points': 0,
            },
            'Senegal': {
                'country_name': "Senegal",
                'country_code': "SN",
                'points': 0,
            },
            'Netherlands': {
                'country_name': "Netherlands",
                'country_code': "NL",
                'points': 0,
            }
        },
        'group_b': {
            "England": {
                'country_name': "England",
                'country_code': "EN",
                'points': 0,
            },
            "Iran": {
                'country_name': "Iran",
                'country_code': "IR",
                'points': 0,
            },
            "United States": {
                'country_name': "United States",
                'country_code': "US",
                'points': 0,
            },
            "Wales": {
                'country_name': "Wales",
                'country_code': "WA",
                'points': 0,
            }
        },
        'group_c': {
            "Argentina": {
                'country_name': "Argentina",
                'country_code': "AR",
                'points': 0,
            },
            "Mexico": {
                'country_name': "Mexico",
                'country_code': "MX",
                'points': 0,
            },
            "Poland": {
                'country_name': "Poland",
                'country_code': "PL",
                'points': 0,
            },
            "Saudi Arabia": {
                'country_name': "Saudi Arabia",
                'country_code': "SA",
                'points': 0,
            }
        },
        'group_d': {
            "Australia": {
                'country_name': "Australia",
                'country_code': "AU",
                'points': 0,
            },
            "Denmark": {
                'country_name': "Denmark",
                'country_code': "DK",
                'points': 0,
            },
            "France": {
                'country_name': "France",
                'country_code': "FR",
                'points': 0,
            },
            "Tunisia": {
                'country_name': "Tunisia",
                'country_code': "TN",
                'points': 0,
            }
        },
        'group_e': {
            "Costa-Rica": {
                'country_name': "Costa-Rica",
                'country_code': "CR",
                'points': 0,
            },
            "Germany": {
                'country_name': "Germany",
                'country_code': "DE",
                'points': 0,
            },
            "Japan": {
                'country_name': "Japan",
                'country_code': "JP",
                'points': 0,
            },
            "Spain": {
                'country_name': "Spain",
                'country_code': "ES",
                'points': 0,
            }
        },
        'group_f': {
            "Belgium": {
                'country_name': "Belgium",
                'country_code': "BE",
                'points': 0,
            },
            "Canada": {
                'country_name': "Canada",
                'country_code': "CA",
                'points': 0,
            },
            "Croatia": {
                'country_name': "Croatia",
                'country_code': "HR",
                'points': 0,
            },
            "Morocco": {
                'country_name': "Morocco",
                'country_code': "MA",
                'points': 0,
            }
        },
        'group_g': {
            "Brazil": {
                'country_name': "Brazil",
                'country_code': "BR",
                'points': 0,
            },
            "Switzerland": {
                'country_name': "Switzerland",
                'country_code': "CH",
                'points': 0,
            },
            "Cameroon": {
                'country_name': "Cameroon",
                'country_code': "CM",
                'points': 0,
            },
            "Serbia": {
                'country_name': "Serbia",
                'country_code': "RS",
                'points': 0,
            }
        },
        'group_h': {
            "Ghana": {
                'country_name': "Ghana",
                'country_code': "GH",
                'points': 0,
            },
            "South Korea": {
                'country_name': "South Korea",
                'country_code': "KR",
                'points': 0,
            },
            "Portugal": {
                'country_name': "Portugal",
                'country_code': "PT",
                'points': 0
            },
            "Uruguay": {
                'country_name': "Uruguay",
                'country_code': "UY",
                'points': 0,
            }
        }
    }


    var songArray = [
        'assets/audios/songs/1.mp3',
    ]

    // Importent document objects
    var start_game = document.getElementById('start_game');
    // var credits = document.getElementById("credits");
    var menu = document.getElementById("menu");
    var groups_div = document.getElementById("groups");
    var teams = document.querySelectorAll('.team');
    // Audio
    var audio = new Audio(songArray[0]);
    audio.play();

    start_game.onclick = function (event) {
        event.preventDefault()
        menu.style.display = "none";
        groups_div.style.display = "grid";
    }

    teams.forEach(element => {
        element.addEventListener('click', () => {
            var fixtures = document.querySelector('#fixtures');
            groups_div.style.display = "none";
            picked_team = element.innerText;
            document.querySelector('#your_team').innerText = picked_team;
            var group = element.parentElement.parentElement.parentElement.getAttribute("id");

            var players_group = groups[group];
            var players_fixtures = [];
            var tournament_teams = [];
            var tournament_fixtures_results = [];

            // Loop over every group in groups except the picked group, and generate fixtures by picking a random team from the group
            for (const [key, value] of Object.entries(groups)) {
                if (key != group) {
                    var random_team = Object.keys(groups[key])[Math.floor(Math.random() * Object.keys(groups[key]).length)];
                    tournament_teams.push(
                        [
                            [
                                random_team,
                                groups[key][random_team]["country_code"],
                            ]
                        ]
                    )
                }
            }


            console.log(tournament_teams)

            // Generate fixtures for picked team
            for (const [key, value] of Object.entries(players_group)) {
                if (key != picked_team) {
                    players_fixtures.push(
                        [
                            [
                                picked_team,
                                groups[group][picked_team]["country_code"],
                            ],
                            [
                                key,
                                groups[group][key]["country_code"],
                            ]
                        ]
                    )
                }
            }

            // console.log(players_fixtures)


            // List group matches

            fixtures.querySelector("ul").innerHTML = `
                <li><b style='color:#FEC310'>${players_fixtures[0][0][0]}</b> - ${players_fixtures[0][1][0]}</li>
                <li><b style='color:#FEC310'>${players_fixtures[1][0][0]}</b> - ${players_fixtures[1][1][0]}</li>
                <li><b style='color:#FEC310'>${players_fixtures[2][0][0]}</b> - ${players_fixtures[2][1][0]}</li>
            `

            fixtures.style.display = "flex";

            localStorage.setItem('picked_team', JSON.stringify(picked_team));
            localStorage.setItem('players_group', JSON.stringify(players_group));
            localStorage.setItem('players_fixtures', JSON.stringify(players_fixtures));
            localStorage.setItem('tournament_teams', JSON.stringify(tournament_teams));

        });
    });

    // Game

    import * as THREE from 'three';

    // Create scene, camera, and canvas
    var scene = new THREE.Scene();
    // set menu background as background of the scene
    scene.background = new THREE.TextureLoader().load('assets/imgs/menu_background.webp');
    // scene.background = new THREE.Color(0x56042C);
    var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 0);
    var renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x000000, 0);
    document.body.appendChild(renderer.domElement);


    // Add full screen size plane to the scene
    var geometry = new THREE.PlaneGeometry(20, 10, 0);
    var material = new THREE.MeshBasicMaterial({ color: 0x56042C, transparent: true, opacity: 0.5 });
    var plane = new THREE.Mesh(geometry, material);
    scene.add(plane);


    camera.position.z = 5;
    // render function
    function render() {
        requestAnimationFrame(render);
        renderer.render(scene, camera);
    }
    render();


</script>

</html>